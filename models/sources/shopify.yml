version: 2

sources:
  # - name: shopify_us
  #   schema: shopify_us
  #   database: joon_solutions
  #   tables:
  #     - name: customer
  #       description: Each record represents a customer in Shopify.

  # - name: shopify_mx
  #   schema: shopify_mx
  #   database: joon_solutions
  #   tables:
  #     - name: customer
  #       description: Each record represents a customer in Shopify.

  - name: shopify
    schema: shopify
    database: joon_solutions
    tables:
      - name: customer
        description: Each record represents a customer in Shopify.
        columns:
          - name: _fivetran_synced
            description: "{{ doc('_fivetran_synced') }}"
          - name: accepts_marketing
            description: Whether the customer has consented to receive marketing material via email. Deprecated and will be coalesced with `email_marketing_consent_state`.
          - name: created_at
            description: The date and time when the customer was created.
          - name: default_address_id
            description: The default address for the customer.
          - name: email
            description: The unique email address of the customer. Attempting to assign the same email address to multiple customers returns an error.
          - name: first_name
            description: The customer's first name.
          - name: id
            description: A unique identifier for the customer.
          - name: last_name
            description: The customer's last name.
          - name: orders_count
            description: The number of orders associated with this customer.
          - name: phone
            description: The unique phone number (E.164 format) for this customer. Attempting to assign the same phone number to multiple customers returns an error.
          - name: state
            description: The state of the customer's account with a shop.
          - name: tax_exempt
            description: Whether the customer is exempt from paying taxes on their order. If true, then taxes won't be applied to an order at checkout. If false, then taxes will be applied at checkout.
          - name: total_spent
            description: The total amount of money that the customer has spent across their order history.
          - name: updated_at
            description: The date and time when the customer information was last updated.
          - name: verified_email
            description: Whether the customer has verified their email address.
          - name: email_marketing_consent_state
            description: The current email marketing state for the customer. New version of `accepts_marketing` field.
          - name: email_marketing_consent_opt_in_level
            description: The marketing subscription opt-in level, as described in the M3AAWG Sender Best Common Practices, that the customer gave when they consented to receive marketing material by email. New version of `marketing_opt_in_level` field.
          - name: email_marketing_consent_consent_updated_at
            description: The date and time when the customer consented to receive marketing material by email. If no date is provided, then the date and time when the consent information was sent is used. New version of `accepts_marketing_updated_at` field.
          - name: accepts_marketing_updated_at
            description: Deprecated. The package will coalesce with `email_marketing_consent_consent_updated_at`. 
          - name: marketing_opt_in_level
            description: Deprecated. The package will coalesce with `email_marketing_consent_opt_in_level`.
          - name: lifetime_duration
            description: The amount of time since the customer was first added to the store.
          - name: _fivetran_deleted
            description: "{{ doc('_fivetran_deleted') }}"
          - name: note
            description: A note about the customer.
          - name: currency 
            description: The three-letter code (ISO 4217 format) for the currency that the customer used when they paid for their last order. Defaults to the shop currency. Returns the shop currency for test orders.

      # - name: abandoned_checkout_discount_code
      #   description: Abandoned checkouts that applied a discount code. 
      #   identifier: "{{ var('shopify_abandoned_checkout_discount_code_identifier', 'abandoned_checkout_discount_code') }}"
      #   columns:
      #     - name: _fivetran_synced
      #       description: "{{ doc('_fivetran_synced') }}"
      #     - name: amount
      #       description: The amount of the discount in presentment currency.
      #     - name: checkout_id
      #       description: ID of the checkout. 
      #     - name: code
      #       description: The discount code.
      #     - name: created_at
      #       description: When the checkout discount application was created.
      #     - name: discount_id
      #       description: ID of the discount. Deprecated, use `code` instead.
      #     - name: index
      #       description: Index (from 1) representing the application of the discount to the checkout. Use the latest (highest index)
      #     - name: type
      #       description: The type of discount. Valid values - percentage, shipping, fixed_amount. (default - fixed_amount)
      #     - name: updated_at
      #       description: When the checkout's discount was last updated

      - name: abandoned_checkout
        description: A checkout is considered abandoned after the customer has added contact information, but before the customer has completed their purchase.
        columns:
          - name: _fivetran_deleted
            description: "{{ doc('_fivetran_deleted') }}"
          - name: _fivetran_synced
            description: "{{ doc('_fivetran_synced') }}"
          - name: abandoned_checkout_url
            description: The recovery URL that's sent to a customer so they can recover their checkout.
          - name: billing_address_address_1
            description: The street address of the billing address.
          - name: billing_address_address_2
            description: An optional additional field for the street address of the billing address.
          - name: billing_address_city
            description: The city of the billing address.
          - name: billing_address_company
            description: The company of the person associated with the billing address.
          - name: billing_address_country
            description: The name of the country of the billing address.
          - name: billing_address_country_code
            description: The two-letter code (ISO 3166-1 alpha-2 format) for the country of the billing address.
          - name: billing_address_first_name
            description: The first name of the person associated with the payment method.
          - name: billing_address_last_name
            description: The last name of the person associated with the payment method.
          - name: billing_address_latitude
            description: The latitude of the billing address.
          - name: billing_address_longitude
            description: The longitude of the billing address.
          - name: billing_address_name
            description: The full name of the person associated with the payment method.
          - name: billing_address_phone
            description: The phone number at the billing address.
          - name: billing_address_province
            description: The name of the state or province of the billing address.
          - name: billing_address_province_code
            description: The two-letter abbreviation of the state or province of the billing address.
          - name: billing_address_zip
            description: The zip or postal code of the billing address.
          - name: buyer_accepts_marketing
            description: Whether the customer would like to receive email updates from the shop. This is set by the 'I want to receive occasional emails about new products, promotions and other news' checkbox during checkout.
          - name: cart_token
            description: The ID for the cart that's attached to the checkout.
          - name: closed_at
            description: The date and time (ISO 8601 format) when the checkout was closed. If the checkout was not closed, then this value is null.
          - name: created_at
            description: The date and time (ISO 8601 format) when the checkout was created.
          - name: currency
            description: The three-letter code (ISO 4217 format) of the shop's default currency at the time of checkout. For the currency that the customer used at checkout, see `presentment_currency`.
          - name: customer_id
            description: ID of the customer with the abandoned checkout.
          - name: customer_locale
            description: The two or three-letter language code, optionally followed by a region modifier. Example values - en, en-CA.
          - name: device_id
            description: The ID of the Shopify POS device that created the checkout.
          - name: email
            description: The customer's email address.
          - name: gateway
            description: The payment gateway used by the checkout.
          - name: id
            description: The ID for the checkout.
          - name: landing_site_base_url
            description: The URL for the page where the customer entered the shop.
          - name: location_id
            description: The ID of the physical location where the checkout was processed.
          - name: name
            description: Checkout order number. 
          - name: note
            description: The text of an optional note that a shop owner can attach to the order.
          - name: phone
            description: The customer's phone number for receiving SMS notifications.
          - name: presentment_currency
            description: The three-letter code (ISO 4217 format) of the currency that the customer used at checkout. For the shop's default currency, see `currency`.
          - name: referring_site
            description: The website that referred the customer to the shop.
          - name: shipping_address_address_1
            description: The street address of the shipping address.
          - name: shipping_address_address_2
            description: An optional additional field for the street address of the shipping address.
          - name: shipping_address_city
            description: The city of the shipping address.
          - name: shipping_address_company
            description: The company of the person associated with the shipping address.
          - name: shipping_address_country
            description: The name of the country of the shipping address.
          - name: shipping_address_country_code
            description: The two-letter code (ISO 3166-1 alpha-2 format) for the country of the shipping address.
          - name: shipping_address_first_name
            description: The first name of the person associated with the shipping address.
          - name: shipping_address_last_name
            description: The last name of the person associated with the shipping address.
          - name: shipping_address_latitude
            description: The latitude of the shipping address.
          - name: shipping_address_longitude
            description: The longitude of the shipping address.
          - name: shipping_address_name
            description: The full name of the person associated with the shipping address.
          - name: shipping_address_phone
            description: The phone number at the shipping address.
          - name: shipping_address_province
            description: The name of the state or province of the shipping address.
          - name: shipping_address_province_code
            description: The two-letter abbreviation of the state or province of the shipping address.
          - name: shipping_address_zip
            description: The zip or postal code of the shipping address.
          - name: source_name
            description: Where the checkout originated. Valid values include `web`, `pos`, `iphone`, `android`.
          - name: subtotal_price
            description: The price of the checkout in _presentment_ (customer) currency before shipping and taxes.
          - name: taxes_included
            description: Boolean representing whether taxes are included in the price.
          - name: token
            description: A unique ID for a checkout.
          - name: total_discounts
            description: The total amount of discounts to be applied in presentment currency.
          - name: total_duties
            description: The total duties of the checkout in presentment currency.
          - name: total_line_items_price
            description: The sum of the prices of all line items in the checkout in _presentment_ (customer) currency.
          - name: total_price
            description: The sum of line item prices, all discounts, shipping costs, and taxes for the checkout in _presentment_ (customer) currency.
          - name: total_tax
            description: The sum of all the taxes applied to the checkout in _presentment_ (customer) currency.
          - name: total_weight
            description: The sum of all the weights in grams of the line items in the checkout.
          - name: updated_at
            description: The date and time (ISO 8601 format) when the checkout was last modified.
          - name: user_id
            description: The ID of the user who created the checkout.