version: 2

models:
  - name: base__google_ads__account_history
    description: Each record represents a version of an account in Google Ads.
    columns:
      - name: unique_id
        description: PK = account_id || _fivetran_synced
        tests:
          - unique
          - not_null
          - dbt_utils.at_least_one
      - name: account_id
        description: The ID of the Account.
      - name: _fivetran_synced
        description: Timestamp of when a record was last synced.
      - name: currency_code
        description: The currency of the spend reported.
      - name: account_name
        description: The descriptive name of the Customer account.
      - name: updated_at
        description: Timestamp of when a record was last synced.
      - name: is_most_recent_record
        description: Boolean representing whether the record is the most recent version of the object.

  - name: base__google_ads__ad_group_history
    description: Each record represents a version of an ad group in Google Ads.
    columns:
      - name: unique_id
        description: PK = ad_group_id || _fivetran_synced
        tests:
          - unique
          - not_null
          - dbt_utils.at_least_one
      - name: ad_group_id
        description: The ID of the AdGroup.
      - name: updated_timestamp
        description: Timestamp of when the record was last updated in Google Ads.
      - name: _fivetran_synced
        description: Timestamp of when a record was last synced.
      - name: ad_group_type
        description: The type of the ad group in Google Ads.
      - name: campaign_id
        description: The ID of the Campaign.
      - name: campaign_name
        description: The name of the Campaign.
      - name: ad_group_name
        description: The name of the AdGroup.
      - name: ad_group_status
        description: Status of the ad group.
      - name: is_most_recent_record
        description: Boolean representing whether the record is the most recent version of the object.

  - name: base__google_ads__ad_history
    description: Each record represents a version of an ad in Google Ads.
    columns:
      - name: unique_id 
        description: PK = ad_id || _fivetran_synced
        tests:
          - unique
          - not_null
          - dbt_utils.at_least_one
      - name: ad_group_id
        description: The ID of the AdGroup.
      - name: ad_id
        description: The ID of the Ad.
      - name: updated_timestamp
        description: Timestamp of when the record was last updated in Google Ads.
      - name: _fivetran_synced
        description: Timestamp of when a record was last synced.
      - name: ad_type
        description: The type of the ad in Google Ads.
      - name: ad_status
        description: Status of the Ad.
      - name: is_most_recent_record
        description: Boolean representing whether the record is the most recent version of the object.
      - name: source_final_urls
        description: The original list of final urls expressed as an array. Please be aware the test used on this field is intended to warn you if you have fields with multiple urls. If you do, the `final_url` field will filter down the urls within the array to just the first. Therefore, this package will only leverage one of possibly many urls within this field array.
        tests:
          - dbt_expectations.expect_column_values_to_not_match_regex_list:
              regex_list: ","
              match_on: any
              severity: warn
      - name: final_url
        description: The first url in the list of the urls within the `final_urls` source field.
      - name: base_url
        description: The base URL of the ad, extracted from the `effective_final_url`.
      - name: url_host
        description: The URL host of the ad, extracted from the `effective_final_url`.
      - name: url_path
        description: The URL path of the ad, extracted from the `effective_final_url`.
      - name: utm_source
        description: The utm_source parameter of the ad, extracted from the `effective_final_url`.
      - name: utm_medium
        description: The utm_medium parameter of the ad, extracted from the `effective_final_url`.
      - name: utm_campaign
        description: The utm_campaign parameter of the ad, extracted from the `effective_final_url`.
      - name: utm_content
        description: The utm_content parameter of the ad, extracted from the `effective_final_url`.
      - name: utm_term
        description: The utm_term parameter of the ad, extracted from the `effective_final_url`.
        
  - name: base__google_ads__ad_stats
    description: Each record represents the daily performance of an ad in Google Ads.
    columns:
      - name: unique_id
        description: PK = date_day || ad_group_id || campaign_id || account_id
        tests:
          - unique
          - not_null
          - dbt_utils.at_least_one
      - name: account_id
        description: The Customer ID.
      - name: date_day
        description: The date being reported on.
      - name: ad_group_id
        description: The ID of the AdGroup.
      - name: ad_id
        description: The ID of the Ad.
      - name: campaign_id
        description: The ID of the Campaign.
      - name: clicks
        description: The number of clicks.
      - name: spend
        description: The sum of your cost-per-click (CPC) and cost-per-thousand impressions (CPM) costs during this period.
      - name: impressions
        description: Count of how often your ad has appeared on a search results page or website on the Google Network.

  - name: base__google_ads__campaign_history
    description: Each record represents a version of a campaign in Google Ads.
    columns:
      - name: unique_id
        description: PK = campaign_id || _fivetran_synced
        tests:
          - unique
          - not_null
          - dbt_utils.at_least_one
      - name: campaign_id
        description: The ID of the Campaign.
      - name: updated_timestamp
        description: Timestamp of when the record was last updated in Google Ads.
      - name: _fivetran_synced
        description: Timestamp of when a record was last synced.
      - name: campaign_name
        description: The name of the Campaign.
      - name: account_id
        description: The Customer ID.
      - name: is_most_recent_record
        description: Boolean representing whether the record is the most recent version of the object.
