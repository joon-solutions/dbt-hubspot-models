version: 2

models:

  - name: fct__hubspot__email_campaigns
    description: Each record represents an email campaign in Hubspot.
    columns:
      - name: email_campaign_id
        description: The ID of the Hubspot email campaign.
        tests:
          - unique
          - not_null
          - dbt_utils.at_least_one

  - name: fct__hubspot__contacts
    description: Each record represents a contact with metrics in Hubspot.
    columns:
      - name: contact_id
        description: The ID of the Hubspot contact.
        tests:
          - unique
          - not_null
          - dbt_utils.at_least_one

  - name: fct__hubspot__contacts_list
    description: Each record represents a contact list in Hubspot.
    columns:
      - name: contact_list_id
        description: The ID of the Hubspot contact list.
        tests:
          - unique
          - not_null
          - dbt_utils.at_least_one
  
  - name: fct__hubspot__deals
    description: Each record represents a deal in Hubspot.
    columns:
      - name: description
        description: A brief description of the deal.

      - name: amount
        description: The total value of the deal in the deal's currency.

      - name: closed_at
        description: The day the deal is expected to close, or was closed.

      - name: created_at
        description: The date the deal was created. This property is set automatically by HubSpot.

      - name: deal_id
        description: The ID of the deal
        tests:
          - not_null
          - unique
          - dbt_utils.at_least_one
          
      - name: deal_name
        description: The name you have given this deal.

      - name: is_deleted
        description: Whether the record was deleted.

      - name: portal_id
        description: '{{ doc("hubspot_portal_id") }}'

      - name: deal_pipeline_id
        description: The ID of the deal's pipeline.

      - name: deal_pipeline_stage_id
        description: The ID of the deal's pipeline stage.

      - name: owner_id
        description: The ID of the deal's owner. 

      - name: count_engagement_notes
        description: "{{ doc('hubspot_count_engagement_notes') }}"

      - name: count_engagement_tasks
        description: "{{ doc('hubspot_count_engagement_tasks') }}"

      - name: count_engagement_calls
        description: "{{ doc('hubspot_count_engagement_calls') }}"

      - name: count_engagement_meetings
        description: "{{ doc('hubspot_count_engagement_meetings') }}"

      - name: count_engagement_emails
        description: "{{ doc('hubspot_count_engagement_emails') }}"

      - name: count_engagement_incoming_emails
        description: "{{ doc('hubspot_count_engagement_incoming_emails') }}"

      - name: count_engagement_forwarded_emails
        description: "{{ doc('hubspot_count_engagement_forwarded_emails') }}"

      - name: is_pipeline_active
        description: Boolean indicating if the pipeline is active.

      - name: pipeline_label
        description: The label of the deal's pipeline.

      - name: pipeline_stage_label
        description: The label of the deal's pipeline stage.

      - name: owner_email_address
        description: The email address of the deal's owner.

      - name: owner_full_name
        description: The full name of the deal's owner.

  - name: fct__hubspot__deal_stage
    description: Each record represents a stage within a deal in Hubspot
    columns:
      - name: deal_stage_id
        description: The unique deal stage identifier.
        tests:
          - not_null
          - unique
          - dbt_utils.at_least_one

      - name: pipeline_stage_id
        description: The name of the deal stage.

      - name: date_stage_entered
        description: The timestamp the deal stage was entered.

      - name: date_stage_exited
        description: The Fivetran calculated exit time of the deal stage.

      - name: is_stage_active
        description: Boolean indicating whether the deal stage active.

      - name: deal_id
        description: The ID of the deal.

      - name: pipeline_id
        description: The ID of the deal's pipeline.

      - name: pipeline_stage_id
        description: The ID of the deal's pipeline stage.

      - name: pipeline_label
        description: The label of the deal's pipeline.

      - name: is_pipeline_active
        description: Boolean indicating if the pipeline is active.

      - name: is_pipeline_stage_active
        description: Boolean indicating if the pipeline stage is active.

      - name: pipeline_stage_label
        description: The label of the deal's pipeline stage.

      - name: source
        description: The relevant source of the deal stage.

      - name: source_id
        description: Reference to the source.

      - name: is_pipeline_stage_closed_won
        description: Whether the stage represents a Closed Won deal.
        
      - name: pipeline_stage_display_order
        description: Used to determine the order in which the stages appear when viewed in HubSpot.
      
      - name: pipeline_display_order
        description: Used to determine the order in which the pipelines appear when viewed in HubSpot.

      - name: pipeline_stage_probability
        description: The probability that the deal will close. Used for the deal forecast.
      
      - name: deal_name
        description: The name you have given this deal.